<ul class="nav pull-right">
  <li class="<%= if request.path == root_path then 'active' end %>"><%= link_to "Home", root_path %></li>
  <li class="<%= if request.path.match(/products/) then 'active' end %>"><%= link_to "Store", products_path %></li>
  <li class="<%= if request.path == categories_path then 'active' end %>"><%= link_to "Categories", categories_path %></li>
  <li class="<%= if request.path == orders_path then 'active' end %>"><%= render_cart_menu %></li>
  <% if current_user %>
  <li class="dropdown<%= if request.path.match(/users/) then ' active' end %>">
    <a href='#' class="dropdown-toggle" data-toggle="dropdown">
      <%= current_user %> <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <%= content_tag :li, (link_to "My Profile", edit_user_registration_path), class: "#{ if request.path == edit_user_registration_path then 'active' end}" %>
      <%= content_tag :li, (link_to "My Order", user_orders_path(current_user)), class: "#{ if request.path == user_orders_path(current_user) then 'active' end}" %>
      <li><%= link_to "Log out", destroy_user_session_path, method: :delete %></li>
    </ul>
  </li>
  <% else %>
  <li class="dropdown">
    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
      Login / Register <b class="caret"></b>
    </a>
    <ul class="dropdown-menu">
      <li><%= link_to "Login", new_user_session_path %></li>
      <li><%= link_to "Register", new_user_registration_path %></li>
    </ul>
  <% end %>
  </li>
</ul>